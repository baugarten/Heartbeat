(function($) {
    LoginBox = Backbone.View.extend({
        el: $("#login_box"),
        defaults: {
            usernameField: $("#username_log"),
            passwordField: $("#password_log"),
        },
        initialize: function() {
            this.user = new User();
            $("form").ajaxForm({
                success: logIn
            });
            
            this.render()
        },
        events: {
            "click #logout": "logout",
            "click #username": "loadUserPage",
            "click #register": "register"
        },
        logIn: function(response, status, xhr, form) {
            var username = response['username'];
            var artistId = msg['artistId'];
            if (username == null) {
                displayError(response['error']);
            } else {
                this.user.logIn(username, artistId)
            }
            
        },
        render: function() {
            _.template( $("#login_box_template").html(), {
                username: this.user.username,
            });
        },
        loadUserPage: function() {

        },
        logout: function() {

        },
    });
    
    var loginBox = new LoginBox();
                                    

})(jQuery);